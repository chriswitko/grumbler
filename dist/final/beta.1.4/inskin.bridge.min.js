!function(a,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Inskin",[],t):"object"==typeof exports?exports.Inskin=t():a.Inskin=t()}("undefined"!=typeof self?self:this,function(){return function(a){function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return a[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e={};return t.m=a,t.c=e,t.d=function(a,e,o){t.o(a,e)||Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:o})},t.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(e,"a",e),e},t.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},t.p="",t(t.s="./src/index.js")}({"./src/button/create.js":function(a,t,e){"use strict";function o(){this.layers=[],this.stylesheets=[],this.creativeId="",this.device="Desktop",$||console.log("The jQuery is not available.");var a={frameId:""};arguments[0]&&"object"===y(arguments[0])&&(this.options=p(a,arguments[0]));var t=this,e=r(window.parent.parent)?window.parent.parent:window.parent;e.addEventListener("message",function(a){var e=Array.from(document.styleSheets).filter(function(a){return a&&a.href&&a.href.includes("/proxy/")}),o=Array.from(document.styleSheets).filter(function(a){return a&&a.href&&a.href.includes("/gateway/")}),i=[].concat(e||[]).concat(o||[]),n=JSON.parse(a.data);switch(n.method){case"areYouReady":var l=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0],p={method:"onAreYouReady",data:{frameId:l}};"undefined"!=typeof areYouReady&&areYouReady&&window.top.postMessage(JSON.stringify(p),"*");break;case"initLayers":t.creativeId=n.payload.creativeId,t.initAllLayers(),t.stylesheets=t.initAllStysheets(),$("html > head").append($("<style>div[data-ism-layer] {border:1px dashed;box-sizing:border-box;}</style>"));break;case"getLayers":t.layers=t.getAllLayers(),t.stylesheets=t.initAllStysheets();var u={method:"onGetLayers",data:t.layers};window.top.postMessage(JSON.stringify(u),"*");break;case"applyActionToLayer":if("bgtype"===n.payload.action){$("#"+n.payload.id).attr("data-bgtype",n.payload.value);var y=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0],m={};m["#"+n.payload.id]=["data-bgtype",n.payload.value],d(t.creativeId,y,[m]),v()}if("align"===n.payload.action){var g=$("#"+n.payload.id),b=g.prop("tagName");i.map(function(a){switch(n.payload.value){case"left":"video"===n.payload.variant&&c(a,"#"+n.payload.id,[["left","0px"]],["right","margin-left"])?s(t.creativeId,a):"DIV"===b&&c(a,"#"+n.payload.id,[["background-position-x","left"]],[])&&s(t.creativeId,a);break;case"center":var e=parseInt(g.css("width"));"video"===n.payload.variant&&c(a,"#"+n.payload.id,[["left","50%"],["margin-left","-"+e/2+"px"]],["right"])?s(t.creativeId,a):"DIV"===b&&c(a,"#"+n.payload.id,[["background-position-x","center"]],[])&&s(t.creativeId,a);break;case"right":"video"===n.payload.variant&&c(a,"#"+n.payload.id,[["right","0"]],["left","margin-left"])?s(t.creativeId,a):"DIV"===b&&c(a,"#"+n.payload.id,[["background-position-x","right"]],[])&&s(t.creativeId,a);break;case"top":"video"===n.payload.variant&&c(a,"#"+n.payload.id,[["top","0"]],["bottom","margin-top"])?s(t.creativeId,a):"DIV"===b&&c(a,"#"+n.payload.id,[["background-position-y","top"]],[])&&s(t.creativeId,a);break;case"middle":var o=parseInt(g.css("height"));"video"===n.payload.variant&&c(a,"#"+n.payload.id,[["top","50%"],["margin-top","-"+o/2+"px"]],["bottom"])?s(t.creativeId,a):"DIV"===b&&c(a,"#"+n.payload.id,[["background-position-y","center"]],[])&&s(t.creativeId,a);break;case"bottom":"video"===n.payload.variant&&c(a,"#"+n.payload.id,[["bottom","0"]],["top","margin-top"])?s(t.creativeId,a):"DIV"===b&&c(a,"#"+n.payload.id,[["background-position-y","bottom"]],[])&&s(t.creativeId,a)}})}if("background-position-x"!==n.payload.action&&"background-position-y"!==n.payload.action&&"background-position"!==n.payload.action&&"z-index"!==n.payload.action&&"width"!==n.payload.action&&"height"!==n.payload.action&&"top"!==n.payload.action&&"left"!==n.payload.action&&"right"!==n.payload.action&&"bottom"!==n.payload.action||i.map(function(a){c(a,"#"+n.payload.id,[[n.payload.action,n.payload.value]])&&s(t.creativeId,a)}),"background-color"===n.payload.action){var h=$("#"+n.payload.id),k=(h.prop("tagName"),h.attr("data-ism-links")&&h.attr("data-ism-links").split(",")),I=(k||[]).map(function(a){return a.trim()});i.map(function(a){c(a,"#"+n.payload.id,[["background-color",n.payload.value]])&&s(t.creativeId,a),"header-bg"===n.payload.id&&c(a,"body",[["background-color",n.payload.value]])&&s(t.creativeId,a)}),I.length&&I.map(function(a){var t={method:"applyActionToLayer",payload:{id:a,variant:n.payload.variant,action:n.payload.action,value:n.payload.value}};f(t)})}if("image"===n.payload.action){var x=$("#"+n.payload.id),w=x.prop("tagName"),S=x.attr("data-ism-links")&&x.attr("data-ism-links").split(","),L=(S||[]).map(function(a){return a.trim()});"DIV"===w&&(i.map(function(a){n.payload.value?c(a,"#"+n.payload.id,[["background-image","url("+n.payload.value+")"]])&&s(t.creativeId,a):c(a,"#"+n.payload.id,[["background-image",""]])&&s(t.creativeId,a)}),L.length&&L.map(function(a){var t={method:"applyActionToLayer",payload:{id:a,variant:n.payload.variant,action:n.payload.action,value:n.payload.value}};f(t)}))}if("video-poster"===n.payload.action){var A=$("#"+n.payload.id+" #poster"),O=A.prop("tagName");if(A&&"IMG"===O){A.attr("src",n.payload.value);var j=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0];d(t.creativeId,j,[{"#poster":["src",n.payload.value]}])}}if("video"===n.payload.action){$("#"+n.payload.id).attr("data-ism-video-url",n.payload.value);var D=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0],R={};R["#"+n.payload.id]=["data-ism-video-url",n.payload.value],d(t.creativeId,D,[R])}if("video-auto-play"===n.payload.action){$("#"+n.payload.id).attr("data-ism-auto-play",n.payload.value);var T=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0],N={};N["#"+n.payload.id]=["data-ism-auto-play",n.payload.value],d(t.creativeId,T,[N]),v()}break;case"selectLayer":if(t.layers=t.getAllLayers(),$("[data-ism-layer-active]").each(function(a){$(this).hide()}),n.layer.id){var P=(r(window.parent.parent),window.parent.document),z=t.layers.find(function(a){return a.id===n.layer.id});if(z&&z.hasScroll){var M=$(window).scrollTop();r(window.parent.parent)?$(P).find("body").animate({scrollTop:M+parseInt(z.hasScroll)},600):$(P).find("html").animate({scrollTop:M+parseInt(z.hasScroll)},600)}else $(P).scrollTop(0);z&&z.links,$("#"+n.layer.id).find("[data-ism-layer-active]").show()}break;default:console.log("NOT IDENTIFIED METHOD",n.method)}})}function r(a){try{return a.self!==window.top}catch(a){return!0}}function i(a){return a.replace(/^\s+|\s+$/gm,"")}function n(a){var t=a.substring(a.indexOf("(")).split(","),e=parseInt(i(t[0].substring(1)),10),o=parseInt(i(t[1]),10),r=parseInt(i(t[2]),10),n=t[3]?parseFloat(i(t[3].substring(0,t[3].length-1))).toFixed(2):"";return"#"+e.toString(16)+o.toString(16)+r.toString(16)+(t[3]?(255*n).toString(16).substring(0,2):"")}function d(a,t,e){var o={method:"onPropsUpdate",data:{creativeId:a,file:t,props:e}};window.top.postMessage(JSON.stringify(o),"*")}function s(a,t){var e=t.href.replace(/^.*[\\\/]/,""),o={method:"onCSSUpdate",data:{creativeId:a,file:e,source:l(t)}};window.top.postMessage(JSON.stringify(o),"*")}function l(a){var t=null,e="";void 0!==a.cssRules?t=a.cssRules:void 0!==a.rules&&(t=a.rules);for(var o in t)void 0!=t[o].cssText&&(e+=t[o].cssText+"\n\n");return e}function c(a,t,e,o,r){t=t,o=o||[],e=e||[];var i=!1;if(a&&a.cssRules)for(var n=0;n<a.cssRules.length;n++){var d=a.cssRules[n];if(d.selectorText===t)return o.map(function(a){return d.style.removeProperty(a)}),e.map(function(a){d.style[a[0]]=a[1]}),i=!0,!0}return!!i&&(a.insertRule(t+" { "+property+": "+value+"; }",0),!0)}function p(a,t){var e;for(e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);return a}t.a=o;var u=this,y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};o.getLayers=function(){u.getAllLayers()},o.prototype.getAllLayers=function(){var a=$("[data-ism-layer]"),t=[],e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/;return a.map(function(a,o){var r=$(o);if(r.attr("data-ism-layer")){var i=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0].replace(".html",""),d={group:i,id:r.attr("id"),key:r.attr("data-ism-key"),name:r.attr("data-ism-name")||r.attr("id"),variant:r.attr("data-ism-layer"),assetURL:r.attr("src")||("none"!==r.css("background-image")?r.css("background-image").replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,""):"")||r.find("#poster").attr("src")||"",assetVideoURL:r.attr("data-ism-video-url")||"",videoAutoPlay:r.attr("data-ism-auto-play")||"",bgtype:r.attr("data-bgtype")||"",isRemovable:"true"===r.attr("data-ism-removable"),isSelectable:!r.attr("data-ism-selectable")||"true"===r.attr("data-ism-selectable"),disabledProps:r.attr("data-ism-disabled-props")||"",order:parseInt(r.attr("data-ism-order"))||100+a,hasScroll:r.attr("data-ism-scroll-to"),links:r.attr("data-ism-links"),style:{backgroundColor:"rgba(0, 0, 0, 0)"!==r.css("background-color")?r.css("background-color")&&!e.test(r.css("background-color"))?n(r.css("background-color")):r.css("background-color"):"",backgroundPositionX:r.css("background-position-x")?r.css("background-position-x"):"0px",backgroundPositionY:r.css("background-position-y")?r.css("background-position-y"):"0px",backgroundPosition:r.css("background-position")?r.css("background-position"):"",zIndex:r.css("z-index")?r.css("z-index"):"",top:r.css("top")?r.css("top"):"0px",left:r.css("left")?r.css("left"):"0px",width:r.css("width")?r.css("width"):"0px",height:r.css("height")?r.css("height"):"0px"}};t.push(d)}}),t},o.prototype.initAllStysheets=function(){return document.styleSheets},o.prototype.initAllLayers=function(){var a=$("[data-ism-layer]");a.map(function(a,t){var e=$(t);if(e.attr("data-ism-layer")){"auto"===e.css("zIndex")&&"video"===e.attr("data-ism-layer")?e.css("z-index",19999+a+10):e.css("z-index",999+a+10);var o="video"===e.attr("data-ism-layer")?19999+a+1:999+a+1;e.find("img").css("zIndex",o+1);var r=$('<div id="clickable-'+e.attr("id")+'" data-ism-layer-active style="position:absolute;z-index:'+o+";top:0px;left:0px;width:"+e.width()+"px;height:"+e.height()+'px"></div>');r.on("click",function(a){a.preventDefault(),a.stopPropagation()}),e.append(r)}}),document.addEventListener("dragover",function(a){a.preventDefault()},!1),document.addEventListener("drop",function(a){a.preventDefault()},!1)};var f=function(a){(r(window.parent.parent)?window.parent.parent:window.parent).postMessage(JSON.stringify(a),"*")},v=function(){var a={method:"applyReload"};window.top.postMessage(JSON.stringify(a),"*")}},"./src/button/index.js":function(a,t,e){"use strict";var o=e("./src/button/create.js");e.d(t,"a",function(){return o.a})},"./src/index.js":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("./src/button/index.js");e.d(t,"Bridge",function(){return o.a})}})});
//# sourceMappingURL=inskin.bridge.min.js.map
//# sourceMappingURL=inskin.bridge.min.js.map