!function(a,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Inskin",[],t):"object"==typeof exports?exports.Inskin=t():a.Inskin=t()}("undefined"!=typeof self?self:this,function(){return function(a){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return a[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=a,t.c=e,t.d=function(a,e,r){t.o(a,e)||Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(e,"a",e),e},t.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},t.p="",t(t.s="./src/index.js")}({"./src/button/create.js":function(a,t,e){"use strict";function r(){this.layers=[],this.stylesheets=[],this.creativeId="",this.device="Desktop",$||console.log("The jQuery is not available.");var a={frameId:""};arguments[0]&&"object"===y(arguments[0])&&(this.options=p(a,arguments[0]));var t=this,e=o(window.parent.parent)?window.parent.parent:window.parent;e.addEventListener("message",function(a){var e=Array.from(document.styleSheets).filter(function(a){return a&&a.href&&a.href.includes("/proxy/")}),r=JSON.parse(a.data);switch(r.method){case"areYouReady":var i=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0],n={method:"onAreYouReady",data:{frameId:i}};"undefined"!=typeof areYouReady&&areYouReady&&window.top.postMessage(JSON.stringify(n),"*");break;case"initLayers":t.creativeId=r.payload.creativeId,t.initAllLayers(),t.stylesheets=t.initAllStysheets(),$("html > head").append($("<style>div[data-ism-layer] {border:1px dashed;box-sizing:border-box;}</style>"));break;case"getLayers":t.layers=t.getAllLayers(),t.stylesheets=t.initAllStysheets();var l={method:"onGetLayers",data:t.layers};window.top.postMessage(JSON.stringify(l),"*");break;case"applyActionToLayer":if("align"===r.payload.action){var p=$("#"+r.payload.id),u=p.prop("tagName");e.map(function(a){switch(r.payload.value){case"left":"video"===r.payload.variant&&c(a,"#"+r.payload.id,[["left","0px"]],["right","margin-left"])?d(t.creativeId,a):"DIV"===u&&c(a,"#"+r.payload.id,[["background-position-x","left"]],[])&&d(t.creativeId,a);break;case"center":var e=parseInt(p.css("width"));"video"===r.payload.variant&&c(a,"#"+r.payload.id,[["left","50%"],["margin-left","-"+e/2+"px"]],["right"])?d(t.creativeId,a):"DIV"===u&&c(a,"#"+r.payload.id,[["background-position-x","center"]],[])&&d(t.creativeId,a);break;case"right":"video"===r.payload.variant&&c(a,"#"+r.payload.id,[["right","0"]],["left","margin-left"])?d(t.creativeId,a):"DIV"===u&&c(a,"#"+r.payload.id,[["background-position-x","right"]],[])&&d(t.creativeId,a);break;case"top":"video"===r.payload.variant&&c(a,"#"+r.payload.id,[["top","0"]],["bottom","margin-top"])?d(t.creativeId,a):"DIV"===u&&c(a,"#"+r.payload.id,[["background-position-y","top"]],[])&&d(t.creativeId,a);break;case"middle":var o=parseInt(p.css("height"));"video"===r.payload.variant&&c(a,"#"+r.payload.id,[["top","50%"],["margin-top","-"+o/2+"px"]],["bottom"])?d(t.creativeId,a):"DIV"===u&&c(a,"#"+r.payload.id,[["background-position-y","center"]],[])&&d(t.creativeId,a);break;case"bottom":"video"===r.payload.variant&&c(a,"#"+r.payload.id,"bottom","0",["top","margin-top"])?d(t.creativeId,a):"DIV"===u&&c(a,"#"+r.payload.id,[["background-position-y","bottom"]],[])&&d(t.creativeId,a)}})}if("background-color"===r.payload.action){var y=$("#"+r.payload.id),v=(y.prop("tagName"),y.attr("data-ism-links")&&y.attr("data-ism-links").split(",")),m=(v||[]).map(function(a){return a.trim()});e.map(function(a){c(a,"#"+r.payload.id,[["background-color",r.payload.value]])&&d(t.creativeId,a),"header-bg"===r.payload.id&&c(a,"body",[["background-color",r.payload.value]])&&d(t.creativeId,a)}),m.length&&m.map(function(a){var t={method:"applyActionToLayer",payload:{id:a,variant:r.payload.variant,action:r.payload.action,value:r.payload.value}};f(t)})}if("image"===r.payload.action){var g=$("#"+r.payload.id),b=g.prop("tagName"),h=g.attr("data-ism-links")&&g.attr("data-ism-links").split(","),I=(h||[]).map(function(a){return a.trim()});"DIV"===b&&(e.map(function(a){c(a,"#"+r.payload.id,[["background-image","url("+r.payload.value+")"]])&&d(t.creativeId,a)}),I.length&&I.map(function(a){var t={method:"applyActionToLayer",payload:{id:a,variant:r.payload.variant,action:r.payload.action,value:r.payload.value}};f(t)}))}if("video-poster"===r.payload.action){var k=$("#"+r.payload.id+" #poster"),w=k.prop("tagName");if(k&&"IMG"===w){k.attr("src",r.payload.value);var x=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0];s(t.creativeId,x,[{"#poster":["src",r.payload.value]}])}}if("video"===r.payload.action){$("#"+r.payload.id).attr("data-ism-video-url",r.payload.value);var S=document.location.href.replace(/^.*[\\\/]/,"").split("?")[0],L={};L["#"+r.payload.id]=["data-ism-video-url",r.payload.value],s(t.creativeId,S,[L])}break;case"selectLayer":if(t.layers=t.getAllLayers(),$("[data-ism-layer-active]").each(function(a){$(this).hide()}),r.layer.id){var A=(o(window.parent.parent),window.parent.document),j=t.layers.find(function(a){return a.id===r.layer.id});if(j&&j.hasScroll){var D=$(window).scrollTop();o(window.parent.parent)?$(A).find("body").animate({scrollTop:D+parseInt(j.hasScroll)},600):$(A).find("html").animate({scrollTop:D+parseInt(j.hasScroll)},600)}else $(A).scrollTop(0);j&&j.links,$("#"+r.layer.id).find("[data-ism-layer-active]").show()}break;default:console.log("NOT IDENTIFIED METHOD",r.method)}})}function o(a){try{return a.self!==window.top}catch(a){return!0}}function i(a){return a.replace(/^\s+|\s+$/gm,"")}function n(a){var t=a.substring(a.indexOf("(")).split(","),e=parseInt(i(t[0].substring(1)),10),r=parseInt(i(t[1]),10),o=parseInt(i(t[2]),10),n=t[3]?parseFloat(i(t[3].substring(0,t[3].length-1))).toFixed(2):"";return"#"+e.toString(16)+r.toString(16)+o.toString(16)+(t[3]?(255*n).toString(16).substring(0,2):"")}function s(a,t,e){var r={method:"onPropsUpdate",data:{creativeId:a,file:t,props:e}};window.top.postMessage(JSON.stringify(r),"*")}function d(a,t){var e=t.href.replace(/^.*[\\\/]/,""),r={method:"onCSSUpdate",data:{creativeId:a,file:e,source:l(t)}};window.top.postMessage(JSON.stringify(r),"*")}function l(a){var t=null,e="";void 0!==a.cssRules?t=a.cssRules:void 0!==a.rules&&(t=a.rules);for(var r in t)void 0!=t[r].cssText&&(e+=t[r].cssText+"\n\n");return e}function c(a,t,e,r,o){t=t,r=r||[],e=e||[];var i=!1;if(a&&a.cssRules)for(var n=0;n<a.cssRules.length;n++){var s=a.cssRules[n];if(s.selectorText===t)return r.map(function(a){return s.style.removeProperty(a)}),e.map(function(a){s.style[a[0]]=a[1]}),i=!0,!0}return!!i&&(a.insertRule(t+" { "+property+": "+value+"; }",0),!0)}function p(a,t){var e;for(e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);return a}t.a=r;var u=this,y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};r.getLayers=function(){u.getAllLayers()},r.prototype.getAllLayers=function(){var a=$("[data-ism-layer]"),t=[],e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/;return a.map(function(a,r){var o=$(r);if(o.attr("data-ism-layer")){var i={id:o.attr("id"),name:o.attr("data-ism-name")||o.attr("id"),variant:o.attr("data-ism-layer"),assetURL:o.attr("src")||("none"!==o.css("background-image")?o.css("background-image").replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,""):"")||o.find("#poster").attr("src")||"",assetVideoURL:o.attr("data-ism-video-url")||"",isSelectable:!o.attr("data-ism-selectable")||"true"===o.attr("data-ism-selectable"),disabledProps:o.attr("data-ism-disabled-props")||"",order:parseInt(o.attr("data-ism-order"))||100+a,hasScroll:o.attr("data-ism-scroll-to"),links:o.attr("data-ism-links"),style:{backgroundColor:"rgba(0, 0, 0, 0)"!==o.css("background-color")?o.css("background-color")&&!e.test(o.css("background-color"))?n(o.css("background-color")):o.css("background-color"):""}};console.log("temp",i),t.push(i)}}),t},r.prototype.initAllStysheets=function(){return document.styleSheets},r.prototype.initAllLayers=function(){var a=$("[data-ism-layer]");a.map(function(a,t){var e=$(t);if(e.attr("data-ism-layer")){"auto"===e.css("zIndex")&&"video"===e.attr("data-ism-layer")?e.css("z-index",19999+a+10):e.css("z-index",999+a+10);var r="video"===e.attr("data-ism-layer")?19999+a+1:999+a+1;e.find("img").css("zIndex",r+1);var o=$('<div id="clickable-'+e.attr("id")+'" data-ism-layer-active style="position:absolute;z-index:'+r+";top:0px;left:0px;width:"+e.width()+"px;height:"+e.height()+'px"></div>');o.on("click",function(a){a.preventDefault(),a.stopPropagation()}),e.append(o)}}),document.addEventListener("dragover",function(a){a.preventDefault()},!1),document.addEventListener("drop",function(a){a.preventDefault()},!1)};var f=function(a){(o(window.parent.parent)?window.parent.parent:window.parent).postMessage(JSON.stringify(a),"*")}},"./src/button/index.js":function(a,t,e){"use strict";var r=e("./src/button/create.js");e.d(t,"a",function(){return r.a})},"./src/index.js":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("./src/button/index.js");e.d(t,"Bridge",function(){return r.a})}})});
//# sourceMappingURL=inskin.bridge.min.js.map
//# sourceMappingURL=inskin.bridge.min.js.map